<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · PlanktonIndividuals.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>PlanktonIndividuals.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>Home</a><ul class="internal"><li><a class="toctext" href="#API-Guide-1">API Guide</a></li></ul></li><li><a class="toctext" href="various/">Various</a></li><li><a class="toctext" href="equations/">Equations</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Home</a></li></ul><a class="edit-page" href="https://github.com/JuliaOcean/PlanktonIndividuals.jl/blob/master/docs/src/index.md#L"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Home</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="PlanktonIndividuals.jl-1" href="#PlanktonIndividuals.jl-1">PlanktonIndividuals.jl</a></h1><p>Documentation for <code>PlanktonIndividuals.jl</code> which simulates the behavior of an ensemble of phytoplankton <code>individuals</code>.</p><h3><a class="nav-anchor" id="Use-Example-1" href="#Use-Example-1">Use Example</a></h3><p>Here we use <a href="https://github.com/climate-machine/Oceananigans.jl">Oceananigans.jl</a> to generate velocity fields and then use those to drive the individual-based model.</p><pre><code class="language-none">Pkg.develop(PackageSpec(path=&quot;PlanktonIndividuals.jl&quot;))
using PlanktonIndividuals
p = dirname(pathof(PlanktonIndividuals))
include(joinpath(p,&quot;Oceananigans_PlanktonIndividuals.jl&quot;))</code></pre><h3><a class="nav-anchor" id="Unit-Testing-1" href="#Unit-Testing-1">Unit Testing</a></h3><p>The tests use input files from <code>samples/</code>. The test suite includes zero-, one-, two-, and three-dimensional simulations.</p><pre><code class="language-none">Pkg.develop(PackageSpec(path=&quot;PlanktonIndividuals.jl&quot;))
Pkg.test(&quot;PlanktonIndividuals&quot;)</code></pre><p><em>Contents:</em></p><ul><li><a href="#PlanktonIndividuals.jl-1">PlanktonIndividuals.jl</a></li><ul><ul><li><a href="#Use-Example-1">Use Example</a></li><li><a href="#Unit-Testing-1">Unit Testing</a></li></ul><li><a href="#API-Guide-1">API Guide</a></li><ul><li><a href="various/#Function-Inventory-1">Function Inventory</a></li></ul><li><a href="various/#Model-Variables-1">Model Variables</a></li><li><a href="various/#Output-Files-1">Output Files</a></li><li><a href="various/#Data-Structures-1">Data Structures</a></li><li><a href="various/#Plotting-Functions-1">Plotting Functions</a></li></ul></ul><h2><a class="nav-anchor" id="API-Guide-1" href="#API-Guide-1">API Guide</a></h2><ul><li><a href="#PlanktonIndividuals.PI_Model-Tuple{Architecture,Any,Any}"><code>PlanktonIndividuals.PI_Model</code></a></li><li><a href="#PlanktonIndividuals.PI_TimeStep!-Tuple{PlanktonIndividuals.Model_Struct,Any,String}"><code>PlanktonIndividuals.PI_TimeStep!</code></a></li><li><a href="#PlanktonIndividuals.PrepRunDir"><code>PlanktonIndividuals.PrepRunDir</code></a></li><li><a href="#PlanktonIndividuals.gen_individuals!-Tuple{Any,Int64,Grids,Architecture}"><code>PlanktonIndividuals.gen_individuals!</code></a></li><li><a href="#PlanktonIndividuals.gen_nutrients-Tuple{Any,Any,Any}"><code>PlanktonIndividuals.gen_nutrients</code></a></li><li><a href="#PlanktonIndividuals.load_nut_initials-Tuple{Any,Any,Any}"><code>PlanktonIndividuals.load_nut_initials</code></a></li><li><a href="#PlanktonIndividuals.nutrients_init-Tuple{Any,Any}"><code>PlanktonIndividuals.nutrients_init</code></a></li><li><a href="#PlanktonIndividuals.read_IR_input"><code>PlanktonIndividuals.read_IR_input</code></a></li><li><a href="#PlanktonIndividuals.read_temp_input"><code>PlanktonIndividuals.read_temp_input</code></a></li><li><a href="#PlanktonIndividuals.sub_nut_tendency!-Tuple{Any,Any,Any}"><code>PlanktonIndividuals.sub_nut_tendency!</code></a></li><li><a href="#PlanktonIndividuals.update_params!-Tuple{Dict,Dict}"><code>PlanktonIndividuals.update_params!</code></a></li><li><a href="#PlanktonIndividuals.write_individuals_to_bin-Tuple{NamedTuple,Any,Any}"><code>PlanktonIndividuals.write_individuals_to_bin</code></a></li><li><a href="#PlanktonIndividuals.write_nut_cons-Tuple{Grids,NamedTuple,NamedTuple,Int64,Any}"><code>PlanktonIndividuals.write_nut_cons</code></a></li><li><a href="#PlanktonIndividuals.write_nut_nc_alltime"><code>PlanktonIndividuals.write_nut_nc_alltime</code></a></li><li><a href="#PlanktonIndividuals.write_nut_nc_each_step-Tuple{NamedTuple,Int64,String}"><code>PlanktonIndividuals.write_nut_nc_each_step</code></a></li><li><a href="#PlanktonIndividuals.write_species_dynamics-Tuple{Int64,Any,Any}"><code>PlanktonIndividuals.write_species_dynamics</code></a></li></ul><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.PI_Model-Tuple{Architecture,Any,Any}" href="#PlanktonIndividuals.PI_Model-Tuple{Architecture,Any,Any}"><code>PlanktonIndividuals.PI_Model</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">PI_model(grid, RunParam)</code></pre><p>Generate the model structure for time step Default distribution of individuals is Normal distribution with 1.0 as mean and 0.25 as SD Default PAR and temp are from ../samples</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaOcean/PlanktonIndividuals.jl/blob/c6c66634de7eda6b26b32c6a2722778b1e7d537c/src/model/models.jl#LL18-L23">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.PI_TimeStep!-Tuple{PlanktonIndividuals.Model_Struct,Any,String}" href="#PlanktonIndividuals.PI_TimeStep!-Tuple{PlanktonIndividuals.Model_Struct,Any,String}"><code>PlanktonIndividuals.PI_TimeStep!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">PI_TimeStep!(model, ΔT, resultpath)</code></pre><p>Update physiology part and nutrient field of &#39;model&#39; one time step forward</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaOcean/PlanktonIndividuals.jl/blob/c6c66634de7eda6b26b32c6a2722778b1e7d537c/src/model/time_step.jl#LL1-L4">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.PrepRunDir" href="#PlanktonIndividuals.PrepRunDir"><code>PlanktonIndividuals.PrepRunDir</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">PrepRunDir(res::String=&quot;results/&quot;)</code></pre><p>Create <code>res/</code> folder if needed. Remove old files from it if needed.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaOcean/PlanktonIndividuals.jl/blob/c6c66634de7eda6b26b32c6a2722778b1e7d537c/src/output/output_writers.jl#LL162-L165">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.gen_nutrients-Tuple{Any,Any,Any}" href="#PlanktonIndividuals.gen_nutrients-Tuple{Any,Any,Any}"><code>PlanktonIndividuals.gen_nutrients</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">gen_nutrients(arch, g, nut)</code></pre><p>Set up initial nutrient fields according to grid information &#39;nut&#39; is an array of 10 elements, each element is a kind of nutrient</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaOcean/PlanktonIndividuals.jl/blob/c6c66634de7eda6b26b32c6a2722778b1e7d537c/src/nut/gen_nut_fields.jl#LL16-L20">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.load_nut_initials-Tuple{Any,Any,Any}" href="#PlanktonIndividuals.load_nut_initials-Tuple{Any,Any,Any}"><code>PlanktonIndividuals.load_nut_initials</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">load_nut_initials(arch, paths, g)</code></pre><p>Load nutrient initial conditions from files</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaOcean/PlanktonIndividuals.jl/blob/c6c66634de7eda6b26b32c6a2722778b1e7d537c/src/nut/gen_nut_fields.jl#LL34-L37">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.read_IR_input" href="#PlanktonIndividuals.read_IR_input"><code>PlanktonIndividuals.read_IR_input</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">read_default_IR_input(nTime, ΔT, grid)
&#39;ΔT&#39; -&gt; length of each time step
&#39;grid&#39; -&gt; grid information</code></pre><p>Read input of irradiance from default binary file</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaOcean/PlanktonIndividuals.jl/blob/c6c66634de7eda6b26b32c6a2722778b1e7d537c/src/params/param_update.jl#LL19-L24">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.read_temp_input" href="#PlanktonIndividuals.read_temp_input"><code>PlanktonIndividuals.read_temp_input</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">read_default_temp_input(nTime, ΔT, grid, ∂T∂z)
&#39;ΔT&#39; -&gt; length of each time step
&#39;grid&#39; -&gt; grid information
&#39;∂T∂z&#39; -&gt; linear vertical temp gradient</code></pre><p>Read input of temperature from default binary file</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaOcean/PlanktonIndividuals.jl/blob/c6c66634de7eda6b26b32c6a2722778b1e7d537c/src/params/param_update.jl#LL45-L51">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.update_params!-Tuple{Dict,Dict}" href="#PlanktonIndividuals.update_params!-Tuple{Dict,Dict}"><code>PlanktonIndividuals.update_params!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">update_params!(parameters, tmp)</code></pre><p>Update parameter values based on .yaml file &#39;parameters&#39; is default parameter set &#39;tmp&#39; is the parameters need to update</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaOcean/PlanktonIndividuals.jl/blob/c6c66634de7eda6b26b32c6a2722778b1e7d537c/src/params/param_update.jl#LL1-L6">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.write_individuals_to_bin-Tuple{NamedTuple,Any,Any}" href="#PlanktonIndividuals.write_individuals_to_bin-Tuple{NamedTuple,Any,Any}"><code>PlanktonIndividuals.write_individuals_to_bin</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">write_individuals_to_bin(individuals,filepath,time)</code></pre><p>write model output of individuals at each time step in a binary file time = model.t</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaOcean/PlanktonIndividuals.jl/blob/c6c66634de7eda6b26b32c6a2722778b1e7d537c/src/output/output_writers.jl#LL124-L128">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.write_nut_cons-Tuple{Grids,NamedTuple,NamedTuple,Int64,Any}" href="#PlanktonIndividuals.write_nut_cons-Tuple{Grids,NamedTuple,NamedTuple,Int64,Any}"><code>PlanktonIndividuals.write_nut_cons</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">write_nut_cons(g, gtr, nutₜ, vel, t, filepath)</code></pre><p>Write a brief summary of nutrients at each time step into a txt file</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaOcean/PlanktonIndividuals.jl/blob/c6c66634de7eda6b26b32c6a2722778b1e7d537c/src/output/output_writers.jl#LL51-L54">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.write_nut_nc_alltime" href="#PlanktonIndividuals.write_nut_nc_alltime"><code>PlanktonIndividuals.write_nut_nc_alltime</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">write_nut_nc_alltime(a, DIC, NH4, NO3, PO4, DOC, DON, DOP, POC, PON, POP, nTime)</code></pre><p>Write a NetCDF file of nutrient fields for the whole run, especially for 0D configuration Default filepath -&gt; &quot;results/nutrients.nc&quot;</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaOcean/PlanktonIndividuals.jl/blob/c6c66634de7eda6b26b32c6a2722778b1e7d537c/src/output/output_writers.jl#LL26-L30">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.write_nut_nc_each_step-Tuple{NamedTuple,Int64,String}" href="#PlanktonIndividuals.write_nut_nc_each_step-Tuple{NamedTuple,Int64,String}"><code>PlanktonIndividuals.write_nut_nc_each_step</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">write_nut_nc_each_step(nut, filepath)</code></pre><p>Write a NetCDF file of nutrient fields at each time step Default filepath -&gt; &quot;results/nutrients/nut.&quot;<em>lpad(string(t),4,&quot;0&quot;)</em>&quot;.nc&quot;</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaOcean/PlanktonIndividuals.jl/blob/c6c66634de7eda6b26b32c6a2722778b1e7d537c/src/output/output_writers.jl#LL1-L5">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.write_species_dynamics-Tuple{Int64,Any,Any}" href="#PlanktonIndividuals.write_species_dynamics-Tuple{Int64,Any,Any}"><code>PlanktonIndividuals.write_species_dynamics</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">write_species_dynamics(t, phyts, filepath)</code></pre><p>Write a brief summary of each species at each time step into a txt file</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaOcean/PlanktonIndividuals.jl/blob/c6c66634de7eda6b26b32c6a2722778b1e7d537c/src/output/output_writers.jl#LL102-L105">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.gen_individuals!-Tuple{Any,Int64,Grids,Architecture}" href="#PlanktonIndividuals.gen_individuals!-Tuple{Any,Int64,Grids,Architecture}"><code>PlanktonIndividuals.gen_individuals!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">gen_didividuals!(plank, grid, arch)</code></pre><p>Set up a series of agents following a normal distribution (mean,var) &#39;Nindivi&#39; is agent number for each species, &#39;sp&#39; is number of species, &#39;Nsuper&#39; is the number of cells one agent represents, &#39;Cquota&#39; is the initial biomass for one cell &#39;(x,y,z)&#39; of an individual is the actual location not grid indices</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaOcean/PlanktonIndividuals.jl/blob/c6c66634de7eda6b26b32c6a2722778b1e7d537c/src/plankton/gen_plankton.jl#LL68-L74">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.nutrients_init-Tuple{Any,Any}" href="#PlanktonIndividuals.nutrients_init-Tuple{Any,Any}"><code>PlanktonIndividuals.nutrients_init</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">nutrients_init(arch, g)</code></pre><p>generate <code>Fields</code> with <code>0.0</code> in <code>Field.data</code></p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaOcean/PlanktonIndividuals.jl/blob/c6c66634de7eda6b26b32c6a2722778b1e7d537c/src/nut/gen_nut_fields.jl#LL1-L4">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.sub_nut_tendency!-Tuple{Any,Any,Any}" href="#PlanktonIndividuals.sub_nut_tendency!-Tuple{Any,Any,Any}"><code>PlanktonIndividuals.sub_nut_tendency!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">sub_nut_tendency!(a, b, c)</code></pre><p>subtract one tendency from total tendencies</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaOcean/PlanktonIndividuals.jl/blob/c6c66634de7eda6b26b32c6a2722778b1e7d537c/src/utils.jl#LL10-L13">source</a></section><footer><hr/><a class="next" href="various/"><span class="direction">Next</span><span class="title">Various</span></a></footer></article></body></html>
