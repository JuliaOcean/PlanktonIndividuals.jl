<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · PlanktonIndividuals.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>PlanktonIndividuals.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>Home</a><ul class="internal"><li><a class="toctext" href="#API-Guide-1">API Guide</a></li></ul></li><li><a class="toctext" href="various/">Various</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Home</a></li></ul><a class="edit-page" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/master/docs/src/index.md#L"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Home</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="PlanktonIndividuals.jl-1" href="#PlanktonIndividuals.jl-1">PlanktonIndividuals.jl</a></h1><p>Documentation for <code>PlanktonIndividuals.jl</code> which simulates the behavior of an ensemble of phytoplankton <code>individuals</code>.</p><h3><a class="nav-anchor" id="Use-Example-1" href="#Use-Example-1">Use Example</a></h3><p>Here we use <a href="https://github.com/climate-machine/Oceananigans.jl">Oceananigans.jl</a> to generate velocity fields and then use those to drive the individual-based model.</p><pre><code class="language-none">Pkg.develop(PackageSpec(path=&quot;PlanktonIndividuals.jl&quot;))
using PlanktonIndividuals
p = dirname(pathof(PlanktonIndividuals))
include(joinpath(p,&quot;Oceananigans_PlanktonIndividuals.jl&quot;))</code></pre><h3><a class="nav-anchor" id="Unit-Testing-1" href="#Unit-Testing-1">Unit Testing</a></h3><p>The tests use input files from <code>samples/</code>. The test suite includes zero-, one-, two-, and three-dimensional simulations.</p><pre><code class="language-none">Pkg.develop(PackageSpec(path=&quot;PlanktonIndividuals.jl&quot;))
Pkg.test(&quot;PlanktonIndividuals&quot;)</code></pre><p><em>Contents:</em></p><ul><li><a href="#PlanktonIndividuals.jl-1">PlanktonIndividuals.jl</a></li><ul><ul><li><a href="#Use-Example-1">Use Example</a></li><li><a href="#Unit-Testing-1">Unit Testing</a></li></ul><li><a href="#API-Guide-1">API Guide</a></li><ul><li><a href="various/#Function-Inventory-1">Function Inventory</a></li></ul><li><a href="various/#Model-Variables-1">Model Variables</a></li><li><a href="various/#Output-Files-1">Output Files</a></li><li><a href="various/#Data-Structures-1">Data Structures</a></li><li><a href="various/#Plotting-Functions-1">Plotting Functions</a></li></ul></ul><h2><a class="nav-anchor" id="API-Guide-1" href="#API-Guide-1">API Guide</a></h2><ul><li><a href="#PlanktonIndividuals.PI_Model-Tuple{Any,Any}"><code>PlanktonIndividuals.PI_Model</code></a></li><li><a href="#PlanktonIndividuals.PI_TimeStep!-Tuple{PlanktonIndividuals.Model_struct,Any,velocity,Any}"><code>PlanktonIndividuals.PI_TimeStep!</code></a></li><li><a href="#PlanktonIndividuals.PI_advect!-Tuple{Any,Any,Any}"><code>PlanktonIndividuals.PI_advect!</code></a></li><li><a href="#PlanktonIndividuals.PI_advectRK4!-Tuple{Any,Any,Any}"><code>PlanktonIndividuals.PI_advectRK4!</code></a></li><li><a href="#PlanktonIndividuals.PrepRunDir"><code>PlanktonIndividuals.PrepRunDir</code></a></li><li><a href="#PlanktonIndividuals.agent_advection-Tuple{Any,Any,Any,Int64}"><code>PlanktonIndividuals.agent_advection</code></a></li><li><a href="#PlanktonIndividuals.agent_advectionRK4-Tuple{Any,Any,Any,Int64}"><code>PlanktonIndividuals.agent_advectionRK4</code></a></li><li><a href="#PlanktonIndividuals.agent_diffusionX-Tuple{Any,Any,Any}"><code>PlanktonIndividuals.agent_diffusionX</code></a></li><li><a href="#PlanktonIndividuals.agent_diffusionY-Tuple{Any,Any,Any}"><code>PlanktonIndividuals.agent_diffusionY</code></a></li><li><a href="#PlanktonIndividuals.agent_diffusionZ-Tuple{Any,Any,Any}"><code>PlanktonIndividuals.agent_diffusionZ</code></a></li><li><a href="#PlanktonIndividuals.chase_prey-Tuple{Array,Any,Float64,Any}"><code>PlanktonIndividuals.chase_prey</code></a></li><li><a href="#PlanktonIndividuals.count_chl-Tuple{Any,Any}"><code>PlanktonIndividuals.count_chl</code></a></li><li><a href="#PlanktonIndividuals.count_horizontal_num-Tuple{Any,Any}"><code>PlanktonIndividuals.count_horizontal_num</code></a></li><li><a href="#PlanktonIndividuals.count_vertical_num-Tuple{Any}"><code>PlanktonIndividuals.count_vertical_num</code></a></li><li><a href="#PlanktonIndividuals.divide-Tuple{Any}"><code>PlanktonIndividuals.divide</code></a></li><li><a href="#PlanktonIndividuals.find_feeding_area-Tuple{Array,Array,Float64}"><code>PlanktonIndividuals.find_feeding_area</code></a></li><li><a href="#PlanktonIndividuals.generate_vel_itp-Tuple{Any,Any}"><code>PlanktonIndividuals.generate_vel_itp</code></a></li><li><a href="#PlanktonIndividuals.get_vels-NTuple{4,Any}"><code>PlanktonIndividuals.get_vels</code></a></li><li><a href="#PlanktonIndividuals.grid_offline-Tuple{Dict}"><code>PlanktonIndividuals.grid_offline</code></a></li><li><a href="#PlanktonIndividuals.nut_advection-NTuple{4,Any}"><code>PlanktonIndividuals.nut_advection</code></a></li><li><a href="#PlanktonIndividuals.nut_diffusion-NTuple{4,Any}"><code>PlanktonIndividuals.nut_diffusion</code></a></li><li><a href="#PlanktonIndividuals.nut_forcing-NTuple{4,Any}"><code>PlanktonIndividuals.nut_forcing</code></a></li><li><a href="#PlanktonIndividuals.nut_update-NTuple{4,Any}"><code>PlanktonIndividuals.nut_update</code></a></li><li><a href="#PlanktonIndividuals.nutrients_init-Tuple{Any}"><code>PlanktonIndividuals.nutrients_init</code></a></li><li><a href="#PlanktonIndividuals.periodic_domain-Tuple{Any,Any}"><code>PlanktonIndividuals.periodic_domain</code></a></li><li><a href="#PlanktonIndividuals.phyt_update-Tuple{Any,Int64}"><code>PlanktonIndividuals.phyt_update</code></a></li><li><a href="#PlanktonIndividuals.rand_walk!-Tuple{Array,Any,Any}"><code>PlanktonIndividuals.rand_walk!</code></a></li><li><a href="#PlanktonIndividuals.read_IR_input"><code>PlanktonIndividuals.read_IR_input</code></a></li><li><a href="#PlanktonIndividuals.read_Ogrids-Tuple{Any}"><code>PlanktonIndividuals.read_Ogrids</code></a></li><li><a href="#PlanktonIndividuals.read_offline_vels-Tuple{Dict,Int64}"><code>PlanktonIndividuals.read_offline_vels</code></a></li><li><a href="#PlanktonIndividuals.read_temp_input"><code>PlanktonIndividuals.read_temp_input</code></a></li><li><a href="#PlanktonIndividuals.setup_agents-Tuple{RunParams,Any}"><code>PlanktonIndividuals.setup_agents</code></a></li><li><a href="#PlanktonIndividuals.setup_nutrients-Tuple{Any,Any}"><code>PlanktonIndividuals.setup_nutrients</code></a></li><li><a href="#PlanktonIndividuals.setup_zooplkt-Tuple{Any,Any}"><code>PlanktonIndividuals.setup_zooplkt</code></a></li><li><a href="#PlanktonIndividuals.sloppy_feed-Tuple{Array,Array,Any}"><code>PlanktonIndividuals.sloppy_feed</code></a></li><li><a href="#PlanktonIndividuals.sum_nut_tendency-Tuple{nutrient_fields,nutrient_fields}"><code>PlanktonIndividuals.sum_nut_tendency</code></a></li><li><a href="#PlanktonIndividuals.update_params!-Tuple{Dict,Dict}"><code>PlanktonIndividuals.update_params!</code></a></li><li><a href="#PlanktonIndividuals.which_grid-Tuple{Any,Any}"><code>PlanktonIndividuals.which_grid</code></a></li><li><a href="#PlanktonIndividuals.write_nut_cons-Tuple{grids,nutrient_fields,nutrient_fields,Int64,Any}"><code>PlanktonIndividuals.write_nut_cons</code></a></li><li><a href="#PlanktonIndividuals.write_nut_nc_alltime"><code>PlanktonIndividuals.write_nut_nc_alltime</code></a></li><li><a href="#PlanktonIndividuals.write_nut_nc_each_step-Tuple{grids,nutrient_fields,Int64,String}"><code>PlanktonIndividuals.write_nut_nc_each_step</code></a></li><li><a href="#PlanktonIndividuals.write_output-Tuple{Any,Any,Any}"><code>PlanktonIndividuals.write_output</code></a></li><li><a href="#PlanktonIndividuals.write_pop_dynamics-Tuple{Int64,Any,Any,Any}"><code>PlanktonIndividuals.write_pop_dynamics</code></a></li><li><a href="#PlanktonIndividuals.zoo_update-Tuple{Any,Int64}"><code>PlanktonIndividuals.zoo_update</code></a></li></ul><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.PI_Model-Tuple{Any,Any}" href="#PlanktonIndividuals.PI_Model-Tuple{Any,Any}"><code>PlanktonIndividuals.PI_Model</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">PI_model(grid, RunParam)</code></pre><p>Generate the model structure for time step Default distribution of individuals is Normal distribution with 1.0 as mean and 0.25 as SD Default PAR and temp are from ../samples</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/models.jl#LL1-L6">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.PI_TimeStep!-Tuple{PlanktonIndividuals.Model_struct,Any,velocity,Any}" href="#PlanktonIndividuals.PI_TimeStep!-Tuple{PlanktonIndividuals.Model_struct,Any,velocity,Any}"><code>PlanktonIndividuals.PI_TimeStep!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">PI_TimeStep!(model, RunParam, velᵇ)</code></pre><p>Update physiology part and nutrient field of &#39;model&#39; one time step forward</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/time_step.jl#LL1-L4">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.PI_advect!-Tuple{Any,Any,Any}" href="#PlanktonIndividuals.PI_advect!-Tuple{Any,Any,Any}"><code>PlanktonIndividuals.PI_advect!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">PI_advect!(individuals, ΔT, vel)</code></pre><p>Individual advection using a simple scheme Particle sinking included</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/time_step.jl#LL43-L47">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.PI_advectRK4!-Tuple{Any,Any,Any}" href="#PlanktonIndividuals.PI_advectRK4!-Tuple{Any,Any,Any}"><code>PlanktonIndividuals.PI_advectRK4!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">PI_advectRK4!(individuals, ΔT, vel_field, grid)</code></pre><p>Individual advection using a RK4 method Used for 3D double grids Particle sinking not included</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/time_step.jl#LL83-L88">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.PrepRunDir" href="#PlanktonIndividuals.PrepRunDir"><code>PlanktonIndividuals.PrepRunDir</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">PrepRunDir(res::String=&quot;results/&quot;)</code></pre><p>Create <code>res/</code> folder if needed. Remove old files from it if needed.</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/output_writers.jl#LL127-L130">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.count_horizontal_num-Tuple{Any,Any}" href="#PlanktonIndividuals.count_horizontal_num-Tuple{Any,Any}"><code>PlanktonIndividuals.count_horizontal_num</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">count_horizontal_num(phyts_a, grid)</code></pre><p>Count individual numbers in each horizontal grid cell, accumulate in vertical direction</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/utils.jl#LL287-L290">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.count_vertical_num-Tuple{Any}" href="#PlanktonIndividuals.count_vertical_num-Tuple{Any}"><code>PlanktonIndividuals.count_vertical_num</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">count_vertical_num(phyts_a)</code></pre><p>Count individual numbers in each meter vertically, accumulate horizontally</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/utils.jl#LL273-L276">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.generate_vel_itp-Tuple{Any,Any}" href="#PlanktonIndividuals.generate_vel_itp-Tuple{Any,Any}"><code>PlanktonIndividuals.generate_vel_itp</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">generate_vel_itp(grid, vel)</code></pre><p>Use Interpolations.jl to generate interpolation objects</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/agent_div.jl#LL4-L7">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.grid_offline-Tuple{Dict}" href="#PlanktonIndividuals.grid_offline-Tuple{Dict}"><code>PlanktonIndividuals.grid_offline</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">grid_offline(GridOfflineOpt)</code></pre><p>Read grid information of selected grids from cluster Return a grid &#39;struc&#39;</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/utils.jl#LL133-L137">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.read_IR_input" href="#PlanktonIndividuals.read_IR_input"><code>PlanktonIndividuals.read_IR_input</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">read_default_IR_input(nTime, ΔT, grid)
&#39;nTime&#39; -&gt; number of time step
&#39;ΔT&#39; -&gt; length of each time step
&#39;grid&#39; -&gt; grid information</code></pre><p>Read input of irradiance from default binary file</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/utils.jl#LL1-L7">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.read_Ogrids-Tuple{Any}" href="#PlanktonIndividuals.read_Ogrids-Tuple{Any}"><code>PlanktonIndividuals.read_Ogrids</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">grid_Ogrids(Ogrid)</code></pre><p>Read grid information from Oceananigans Return a grid &#39;struc&#39; &#39;z&#39; starts from the bottom</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/utils.jl#LL206-L211">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.read_temp_input" href="#PlanktonIndividuals.read_temp_input"><code>PlanktonIndividuals.read_temp_input</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">read_default_temp_input(nTime, ΔT, grid, ∂T∂z)
&#39;nTime&#39; -&gt; number of time step
&#39;ΔT&#39; -&gt; length of each time step
&#39;grid&#39; -&gt; grid information
&#39;∂T∂z&#39; -&gt; linear vertical temp gradient</code></pre><p>Read input of temperature from default binary file</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/utils.jl#LL38-L45">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.setup_agents-Tuple{RunParams,Any}" href="#PlanktonIndividuals.setup_agents-Tuple{RunParams,Any}"><code>PlanktonIndividuals.setup_agents</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">setup_agents(RunParams,grid)</code></pre><p>Set up a series of agents following a normal distribution (mean,var) &#39;Nindivi&#39; is agent number for each species, &#39;sp&#39; is number of species, &#39;Nsuper&#39; is the number of cells one agent represents, &#39;Cquota&#39; is the initial biomass for one cell &#39;(x,y,z)&#39; of an individual is the actual location not grid indices</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/model_setup.jl#LL1-L7">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.setup_nutrients-Tuple{Any,Any}" href="#PlanktonIndividuals.setup_nutrients-Tuple{Any,Any}"><code>PlanktonIndividuals.setup_nutrients</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">setup_nutrients(g,nut)</code></pre><p>Set up initial nutrient fields according to grid information &#39;Nut&#39; is an array of 10 elements, each element is a kind of nutrient</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/model_setup.jl#LL79-L83">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.update_params!-Tuple{Dict,Dict}" href="#PlanktonIndividuals.update_params!-Tuple{Dict,Dict}"><code>PlanktonIndividuals.update_params!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">update_params!(parameters, tmp)</code></pre><p>Update parameter values based on .yaml file &#39;parameters&#39; is default parameter set &#39;tmp&#39; is the parameters need to update</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/option_params.jl#LL15-L20">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.write_nut_nc_alltime" href="#PlanktonIndividuals.write_nut_nc_alltime"><code>PlanktonIndividuals.write_nut_nc_alltime</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">write_nut_nc_alltime(a, DIC, NH4, NO3, PO4, DOC, DON, DOP, POC, PON, POP, nTime)</code></pre><p>Write a NetCDF file of nutrient fields for the whole run, especially for 0D configuration Default filepath -&gt; &quot;results/nutrients.nc&quot;</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/output_writers.jl#LL31-L35">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.write_nut_nc_each_step-Tuple{grids,nutrient_fields,Int64,String}" href="#PlanktonIndividuals.write_nut_nc_each_step-Tuple{grids,nutrient_fields,Int64,String}"><code>PlanktonIndividuals.write_nut_nc_each_step</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">write_nut_nc_each_step(g, nut, t)</code></pre><p>Write a NetCDF file of nutrient fields at each time step Default filepath -&gt; &quot;results/nutrients/nut.&quot;<em>lpad(string(t),4,&quot;0&quot;)</em>&quot;.nc&quot;</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/output_writers.jl#LL1-L5">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.write_output-Tuple{Any,Any,Any}" href="#PlanktonIndividuals.write_output-Tuple{Any,Any,Any}"><code>PlanktonIndividuals.write_output</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">write_output(individuals,filepath,time)</code></pre><p>write model output of individuals at each time step in a binary file time = model.t*ΔT</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/output_writers.jl#LL104-L108">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.agent_advection-Tuple{Any,Any,Any,Int64}" href="#PlanktonIndividuals.agent_advection-Tuple{Any,Any,Any,Int64}"><code>PlanktonIndividuals.agent_advection</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">agent_advection(phyts_a,vel_itp,g,ΔT)</code></pre><p>Update grid indices of all the individuals according to velocity fields of each time step Periodic domain is used &#39;phyts<em>a&#39; is a dataframe contains all the individuals of current time step &#39;vel</em>itp&#39; is the tuple contains interpolations of u, v, w velocites of current time step &#39;g&#39; is the grid information and &#39;ΔT&#39; is time step</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/agent_div.jl#LL62-L69">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.agent_advectionRK4-Tuple{Any,Any,Any,Int64}" href="#PlanktonIndividuals.agent_advectionRK4-Tuple{Any,Any,Any,Int64}"><code>PlanktonIndividuals.agent_advectionRK4</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">agent_advectionRK4(phyts_a, vel_itps, g, ΔT::Int64)</code></pre><p>&#39;vel_itps&#39; is an array of tuples containing interpolations of u, v, w velocites of current time step</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/agent_div.jl#LL79-L82">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.agent_diffusionX-Tuple{Any,Any,Any}" href="#PlanktonIndividuals.agent_diffusionX-Tuple{Any,Any,Any}"><code>PlanktonIndividuals.agent_diffusionX</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">agent_diffusionX(phyt,g,κh)</code></pre><p>Using a random walk algorithm for horizontal diffusion</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/agent_div.jl#LL109-L112">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.agent_diffusionY-Tuple{Any,Any,Any}" href="#PlanktonIndividuals.agent_diffusionY-Tuple{Any,Any,Any}"><code>PlanktonIndividuals.agent_diffusionY</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">agent_diffusionX(phyt,g,κh)</code></pre><p>Using a random walk algorithm for horizontal diffusion</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/agent_div.jl#LL118-L121">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.agent_diffusionZ-Tuple{Any,Any,Any}" href="#PlanktonIndividuals.agent_diffusionZ-Tuple{Any,Any,Any}"><code>PlanktonIndividuals.agent_diffusionZ</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">agent_diffusionZ(phyt,g,κv)</code></pre><p>Using a random walk algorithm for vertical diffusion</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/agent_div.jl#LL126-L129">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.chase_prey-Tuple{Array,Any,Float64,Any}" href="#PlanktonIndividuals.chase_prey-Tuple{Array,Any,Float64,Any}"><code>PlanktonIndividuals.chase_prey</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">chase_prey(zplk, cord, travel_dist, grid)</code></pre><p>Zooplankton chase after the nearest prey return the distance the predator traveled</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/zooplankton.jl#LL42-L46">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.count_chl-Tuple{Any,Any}" href="#PlanktonIndividuals.count_chl-Tuple{Any,Any}"><code>PlanktonIndividuals.count_chl</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">count_chl(phyts_a, grid)</code></pre><p>Compute total chl concentration in each grid cell</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/utils.jl#LL258-L261">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.divide-Tuple{Any}" href="#PlanktonIndividuals.divide-Tuple{Any}"><code>PlanktonIndividuals.divide</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">divide(phyt)</code></pre><p>An adult cell divides evenly into two daughter cells Two daughter cells will be in the same place of the adult cell</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/phyt_process.jl#LL4-L8">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.find_feeding_area-Tuple{Array,Array,Float64}" href="#PlanktonIndividuals.find_feeding_area-Tuple{Array,Array,Float64}"><code>PlanktonIndividuals.find_feeding_area</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">find_feeding_area(zplk, phyts, radius)</code></pre><p>&#39;zplk&#39; is a individual of zooplankton &#39;phyts&#39; is the collection of all phytoplankton at current time step &#39;radius&#39; is the radius of a sphere represent the feeding area The function finds all preys within the sphere Return &#39;false&#39; if no prey is in this sphere with the nearest prey Return &#39;true&#39; if there is at least on prey in this sphere along with a dataframe containing all preys (temporal ID and rd) and the nearest prey</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/zooplankton.jl#LL4-L13">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.get_vels-NTuple{4,Any}" href="#PlanktonIndividuals.get_vels-NTuple{4,Any}"><code>PlanktonIndividuals.get_vels</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">get_vels(x, y, z, vel_itp)</code></pre><p>Read and interpolate velocity at &#39;(x,y,z)&#39; &#39;(x,y,z)&#39; is actual location of an individual &#39;vel_itp&#39; is interpolation objects</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/agent_div.jl#LL34-L39">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.nut_advection-NTuple{4,Any}" href="#PlanktonIndividuals.nut_advection-NTuple{4,Any}"><code>PlanktonIndividuals.nut_advection</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">nut_advection(g, nutrients, velᵇ, ΔT)</code></pre><p>compute nutrient advection using DST3FL shceme</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/nutrient_processes.jl#LL56-L59">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.nut_diffusion-NTuple{4,Any}" href="#PlanktonIndividuals.nut_diffusion-NTuple{4,Any}"><code>PlanktonIndividuals.nut_diffusion</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">nut_diffusion(g, nutrients, params)</code></pre><p>compute diffusion for each nutrient tracer</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/nutrient_processes.jl#LL75-L78">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.nut_forcing-NTuple{4,Any}" href="#PlanktonIndividuals.nut_forcing-NTuple{4,Any}"><code>PlanktonIndividuals.nut_forcing</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">nut_forcing(nut, g, params)</code></pre><p>compute remineralization and nitrification of nutrients</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/nutrient_processes.jl#LL19-L22">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.nut_update-NTuple{4,Any}" href="#PlanktonIndividuals.nut_update-NTuple{4,Any}"><code>PlanktonIndividuals.nut_update</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">function nut_update(model, velᵇ, consume, ΔT, Dim)</code></pre><p>Update nutrient fields to next time step with source term and consumption by phytoplankton (&#39;consume&#39;)</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/nutrient_processes.jl#LL102-L105">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.nutrients_init-Tuple{Any}" href="#PlanktonIndividuals.nutrients_init-Tuple{Any}"><code>PlanktonIndividuals.nutrients_init</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">nutrients_init(g)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/model_setup.jl#LL66-L68">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.periodic_domain-Tuple{Any,Any}" href="#PlanktonIndividuals.periodic_domain-Tuple{Any,Any}"><code>PlanktonIndividuals.periodic_domain</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">periodic_domain(xF, x)</code></pre><p>&#39;xF&#39; is the array containing the faces of grids &#39;x&#39; is the coordinate of an individual</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/agent_div.jl#LL46-L50">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.phyt_update-Tuple{Any,Int64}" href="#PlanktonIndividuals.phyt_update-Tuple{Any,Int64}"><code>PlanktonIndividuals.phyt_update</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">phyt_update(t, ΔT, g, phyts_a, nutrients, IR, temp)</code></pre><p>Update the individuals of current time step into next time step Control flow: Graze -&gt;Grow(photosynthesis, biosynthesis, maintenance) -&gt; Natural Death -&gt; Division Return a dataframe of next time step individuals, graze number, divide number, death number, and nutrient consumption</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/phyt_process.jl#LL31-L36">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.rand_walk!-Tuple{Array,Any,Any}" href="#PlanktonIndividuals.rand_walk!-Tuple{Array,Any,Any}"><code>PlanktonIndividuals.rand_walk!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">rand_walk(zplk::DataFrameRow, grid, travel_dist)</code></pre><p>If zooplankton cannot find any prey, it will swim randomly</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/zooplankton.jl#LL70-L73">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.read_offline_vels-Tuple{Dict,Int64}" href="#PlanktonIndividuals.read_offline_vels-Tuple{Dict,Int64}"><code>PlanktonIndividuals.read_offline_vels</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">read_offline_vels(VelOfflineOpt, t)</code></pre><p>Read velocity fields of selected grids at &#39;t&#39; from cluster Return a velocity &#39;struc&#39; extra cols &amp; rows are read in for double grids z starts from the bottom</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/utils.jl#LL78-L84">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.setup_zooplkt-Tuple{Any,Any}" href="#PlanktonIndividuals.setup_zooplkt-Tuple{Any,Any}"><code>PlanktonIndividuals.setup_zooplkt</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">setup_zooplkt(ZooOpt, grid)</code></pre><p>Set up zooplankton individuals according to &#39;ZooOpt&#39; from &#39;RunParam&#39;</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/model_setup.jl#LL39-L42">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.sloppy_feed-Tuple{Array,Array,Any}" href="#PlanktonIndividuals.sloppy_feed-Tuple{Array,Array,Any}"><code>PlanktonIndividuals.sloppy_feed</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">sloppy_feed(zplk, phyts_feed, params)</code></pre><p>zooplankton feed on selected phytoplankton return C and N content as exports to environment</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/zooplankton.jl#LL89-L93">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.sum_nut_tendency-Tuple{nutrient_fields,nutrient_fields}" href="#PlanktonIndividuals.sum_nut_tendency-Tuple{nutrient_fields,nutrient_fields}"><code>PlanktonIndividuals.sum_nut_tendency</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">sum_nut_tendency(consume_p, consume_z)</code></pre><p>sum up 2 nut tendencies</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/nutrient_processes.jl#LL1-L4">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.which_grid-Tuple{Any,Any}" href="#PlanktonIndividuals.which_grid-Tuple{Any,Any}"><code>PlanktonIndividuals.which_grid</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">which_grid(phyt,g)</code></pre><p>decide which grid an individual is in return grid indices</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/utils.jl#LL244-L248">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.write_nut_cons-Tuple{grids,nutrient_fields,nutrient_fields,Int64,Any}" href="#PlanktonIndividuals.write_nut_cons-Tuple{grids,nutrient_fields,nutrient_fields,Int64,Any}"><code>PlanktonIndividuals.write_nut_cons</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">write_nut_cons(g, gtr, nutₜ, vel, t, filepath)</code></pre><p>Compute total gtr (supposed to be 0), and surface vertical tracer flux(supposed to be 0) Write a brief summary of each time step into a txt file</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/output_writers.jl#LL65-L69">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.write_pop_dynamics-Tuple{Int64,Any,Any,Any}" href="#PlanktonIndividuals.write_pop_dynamics-Tuple{Int64,Any,Any,Any}"><code>PlanktonIndividuals.write_pop_dynamics</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">write_pop_dynamics(t, phyts, counts, filepath)</code></pre><p>Write a brief summary of population changes at each time step into a txt file</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/output_writers.jl#LL86-L89">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="PlanktonIndividuals.zoo_update-Tuple{Any,Int64}" href="#PlanktonIndividuals.zoo_update-Tuple{Any,Int64}"><code>PlanktonIndividuals.zoo_update</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">zoo_update(zoos, phyts, ΔT)</code></pre><p>update individuals of zooplankton one time step forward both physiology processes and active movement Control flow: Death -&gt; Graze &amp; Swim &amp; Grow -&gt; Reproduction</p></div></div><a class="source-link" target="_blank" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/65f12d6f998d9d589c0f0b1141dee1adc8c118d8/src/zooplankton.jl#LL127-L132">source</a></section><footer><hr/><a class="next" href="various/"><span class="direction">Next</span><span class="title">Various</span></a></footer></article></body></html>
