<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Various · PlanktonIndividuals.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>PlanktonIndividuals.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li class="current"><a class="toctext" href>Various</a><ul class="internal"><li><a class="toctext" href="#Model-Variables-1">Model Variables</a></li><li><a class="toctext" href="#Output-Files-1">Output Files</a></li><li><a class="toctext" href="#Data-Structures-1">Data Structures</a></li><li><a class="toctext" href="#Plotting-Functions-1">Plotting Functions</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Various</a></li></ul><a class="edit-page" href="https://github.com/zhenwu0728/PlanktonIndividuals.jl/blob/master/docs/src/various.md#L"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Various</span><a class="fa fa-bars" href="#"></a></div></header><h3><a class="nav-anchor" id="Function-Inventory-1" href="#Function-Inventory-1">Function Inventory</a></h3><p><strong>Use cases:</strong></p><ul><li><code>Oceananigans_PlanktonIndividuals.jl</code></li></ul><p><strong>Infrastructure functions:</strong></p><ul><li><code>model_struct.jl</code> defines <code>velocity</code>, <code>grids</code>, <code>nutrient_fields</code>, and <code>rem</code> structs.</li><li><code>model.jl</code> deals with the model basic functionalities.</li><li><code>model_setup.jl</code> is <code>setup_agents</code> and <code>setup_nutrients</code></li><li><code>option_params.jl</code> and <code>param_defaults.jl</code> deal with model parameter values</li><li><code>utils.jl</code> utility functions for IO and operations.</li></ul><p><strong>process functions:</strong></p><ul><li><code>phyt_process.jl</code> = <code>daynight</code>, <code>PAR_cal</code>, <code>PC</code>, <code>Nuptake</code>, <code>chl_sync</code>, <code>divide</code>, <code>phyt_update</code></li><li><code>nutrient_processes.jl</code> = <code>compute_nut_biochem</code>, <code>compute_source_term</code>, <code>nut_update</code></li><li><code>dst3fl.jl</code> 3rd order DST Scheme with flux limiting</li><li><code>2nd_adv_diffu.jl</code> right hand side term functions (?)</li><li><code>agent_div.jl</code> = is mostly <code>agent_move</code>, <code>agent_move_1D</code> + <code>double_grid</code>, <code>trilinear_itpl</code>, <code>simple_itpl</code></li></ul><h2><a class="nav-anchor" id="Model-Variables-1" href="#Model-Variables-1">Model Variables</a></h2><p><em><strong>The lists and text below likely is out of date</strong></em></p><h4><a class="nav-anchor" id=")-state-variables-1" href="#)-state-variables-1">1) state variables</a></h4><pre><code class="language-none">phyts_a
nutrients</code></pre><h4><a class="nav-anchor" id=")-input-variables-1" href="#)-input-variables-1">2) input variables</a></h4><ul><li><code>g</code> from <code>grid_offline()</code> (grid variables)</li><li><code>temp, IR</code> from <code>read_input()</code> (before loop)</li><li><code>remin</code> from <code>rem()</code> (before loop)</li><li><code>velᵇ</code> from <code>read_offline_vels()</code> (in loop)</li></ul><p><em>Notes:</em></p><ul><li><code>IR</code> and <code>temp</code> get cycle through / interpolated inside <code>phyt_update</code> (via <code>IR[trunc(Int,t*ΔT/3600)]</code>). Not sure about <code>daynight(t,IR)</code> in <code>phyt_update</code>. </li><li><code>read_offline_vels</code> receives <code>trunc(Int,t*ΔT/3600)</code> as argument.</li><li><code>remin</code> is time-invariant; like <code>g</code>.</li></ul><h4><a class="nav-anchor" id=")-intermediate-variables-1" href="#)-intermediate-variables-1">3) intermediate variables</a></h4><ul><li><code>F</code> = <code>compute_nut_biochem(nutrients, remin)</code></li><li><code>gtr</code> = <code>compute_source_term(nutrients, velᵇ, g, F)</code></li><li><code>nutₜ</code> = <code>nut_update(nutrients, consume, g, gtr, ΔT)</code></li></ul><h4><a class="nav-anchor" id=")-diagnostic-variables-1" href="#)-diagnostic-variables-1">4) diagnostic variables</a></h4><ul><li><code>dvid_ct</code>, <code>graz_ct</code>, <code>death_ct</code> from <code>phyt_update</code></li><li><code>gtr</code>, <code>nutₜ</code>, <code>velᵇ</code>, <code>agent_num</code> from </li></ul><h2><a class="nav-anchor" id="Output-Files-1" href="#Output-Files-1">Output Files</a></h2><p><em><strong>The lists and text below likely is out of date</strong></em></p><h4><a class="nav-anchor" id=")-listing-1" href="#)-listing-1">1) listing</a></h4><pre><code class="language-none">B1.bin		all agents at all time steps for species 1
B2.bin		... species 2
cons_C.txt	total carbon for each time step
cons_DIN.txt	... DIN ...
cons_N.txt	... N ...
grid.bin	grid (input)
IR.bin		irradiance (input)
nutrients/nut.0001.nc (all nitrients for 1 time step)	
nutrients/nut.0002.nc (same...)
output1.bin	average for all agents for each time step for species 1
output2.bin	... 2
output.bin	... for the two species
VD1.bin		vertical profile of the agents opouplation for species 1
VD2.bin		... species 2</code></pre><h4><a class="nav-anchor" id=")-netcdf-output-1" href="#)-netcdf-output-1">2) netcdf output</a></h4><pre><code class="language-none">netcdf nut.0001 {
dimensions:
        yC = 1 ;
        xC = 1 ;
        zC = 40 ;
variables:
        double DIC(zC, yC, xC) ;
                DIC:units = &quot;mmolC/m^3&quot; ;
        float yC(yC) ;
                yC:units = &quot;m&quot; ;
                yC:longname = &quot;Locations of the cell centers in the y-direction.&quot; ;
        float xC(xC) ;
                xC:units = &quot;m&quot; ;
                xC:longname = &quot;Locations of the cell centers in the x-direction.&quot; ;
        float zC(zC) ;
                zC:units = &quot;m&quot; ;
                zC:longname = &quot;Locations of the cell centers in the z-direction.&quot; ;
        double DIN(zC, yC, xC) ;
                DIN:units = &quot;mmolN/m^3&quot; ;
        double DOC(zC, yC, xC) ;
                DOC:units = &quot;mmolC/m^3&quot; ;
        double DON(zC, yC, xC) ;
                DON:units = &quot;mmolN/m^3&quot; ;
        double POC(zC, yC, xC) ;
                POC:units = &quot;mmolC/m^3&quot; ;
        double PON(zC, yC, xC) ;
                PON:units = &quot;mmolN/m^3&quot; ;</code></pre><h2><a class="nav-anchor" id="Data-Structures-1" href="#Data-Structures-1">Data Structures</a></h2><p><em><strong>The lists and text below likely is out of date</strong></em></p><pre><code class="language-none"> output = DataFrame(time=0, 
 gen_ave=mean(B[1].gen), 
 spec_ave = mean(B[1].sp),
 Cq1_ave=mean(B[1].Cq1), 
 Cq2_ave=mean(B[1].Cq2), 
 Nq_ave=mean(B[1].Nq),
 size_ave=mean(B[1].size),
 chl_ave=mean(B[1].chl),
 Population=size(B[1],1),
 dvid=0,
 graz=0,
 death = 0)</code></pre><h2><a class="nav-anchor" id="Plotting-Functions-1" href="#Plotting-Functions-1">Plotting Functions</a></h2><p><em><strong>The lists and text below likely is out of date</strong></em></p><pre><code class="language-none">julia&gt; using DataFrames, Serialization
julia&gt; output=open(deserialize,&quot;results/output.bin&quot;);
julia&gt; plot(output.Population)</code></pre><footer><hr/><a class="previous" href="../"><span class="direction">Previous</span><span class="title">Home</span></a></footer></article></body></html>
